<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<title>ç‹é‡ç”Ÿæ•´åˆçœ‹æ¿</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body { font-family: system-ui; background:#0b1020; color:#fff; margin:20px }
.card { background:#141a33; padding:16px; border-radius:12px; margin-bottom:12px }
.timer { font-size:14px; opacity:.85 }
.big { font-size:20px; font-weight:700 }
</style>
</head>
<body>

<h2>ğŸ”¥ ç‹é‡ç”Ÿæ•´åˆçœ‹æ¿</h2>
<div id="list"></div>

<script>
async function load() {
  const res = await fetch("/api/boss");
  const data = await res.json();

  const now = Date.now();
  const root = document.getElementById("list");
  root.innerHTML = "";

  Object.values(data).forEach(b => {
    const e = document.createElement("div");
    e.className = "card";

    let countdown = "";
    if (b.respawn) {
      const t = b.respawn.earliest - now;
      countdown = t > 0
        ? `æœ€æ—©å€’æ•¸ï¼š${Math.floor(t / 60000)} åˆ†`
        : "âš ï¸ å·²é€²å…¥å¯èƒ½åˆ·æ–°å€é–“";
    }

    e.innerHTML = `
      <div class="big">${b.boss}</div>
      <div class="timer">ä¸Šæ¬¡ï¼š${new Date(b.detectedAt).toLocaleString()}</div>
      <div class="timer">${countdown}</div>
    `;
    root.appendChild(e);
  });
}

// æ¯ 5 ç§’æ›´æ–°å€’æ•¸
load();
setInterval(load, 5000);
</script>

</body>
</html>

